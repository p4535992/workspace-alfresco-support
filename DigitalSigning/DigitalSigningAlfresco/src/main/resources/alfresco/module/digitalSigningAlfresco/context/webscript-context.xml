<?xml version='1.0' encoding='UTF-8'?>

<beans xmlns="http://www.springframework.org/schema/beans"
	   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	   xsi:schemaLocation="http://www.springframework.org/schema/beans
          http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">
          
    <!-- 
    
	<bean id="webscript.alfresco.digitalSigning.information.image.get"
		  class="org.alfresco.plugin.digitalSigning.webscript.Image"
		  parent="webscript">
	</bean>
	
	<bean id="webscript.alfresco.digitalSigning.information.isPdfTransformable.get"
		  class="org.alfresco.plugin.digitalSigning.webscript.IsPdfTransformable"
		  parent="webscript">
	</bean>
	
	<bean id="webscript.alfresco.digitalSigning.information.signatureInformation.get"
		  class="org.alfresco.plugin.digitalSigning.webscript.SignatureInformation"
		  parent="webscript">
	</bean>
 
    <bean id="webscript.alfresco.digitalSigning.search.search.get"
		  class="org.alfresco.plugin.digitalSigning.webscript.Search"
		  parent="webscript">
	</bean>

	<bean id="webscript.alfresco.digitalSigning.sign.sign.post"
		  class="org.alfresco.plugin.digitalSigning.webscript.SigningWebScript"
		  parent="webscript">
	</bean>

	 <bean id="webscript.alfresco.digitalSigning.upload.chooseAlias.post"
		  class="org.alfresco.plugin.digitalSigning.webscript.ChooseAlias"
		  parent="webscript">
	 </bean>
	 <bean id="webscript.alfresco.digitalSigning.upload.delete.post"
		  class="org.alfresco.plugin.digitalSigning.webscript.Delete"
		  parent="webscript">
	 </bean>	 
	 <bean id="webscript.alfresco.digitalSigning.upload.upload.post"
		  class="org.alfresco.plugin.digitalSigning.webscript.SignUpload"
		  parent="webscript">
	 </bean>
	 
	 <bean id="webscript.alfresco.digitalSigning.verify.verify.get"
		  class="org.alfresco.plugin.digitalSigning.webscript.?????"
		  parent="webscript">
	</bean>
	-->
	
	<!-- Signing service -->
	<bean id="digitalSigningService" class="org.alfresco.plugin.digitalSigning.service.SigningService">
		<property name="nodeService" ref="nodeService" />
		<property name="dictionaryService" ref="dictionaryService" />
		<property name="contentService" ref="contentService" />
		<property name="fileFolderService" ref="fileFolderService" />
		<property name="contentTransformerRegistry" ref="contentTransformerRegistry" />
		<property name="metadataEncryptor" ref="metadataEncryptor" />
	</bean>
	
  	<!-- Sign service javaScript API -->
  	<bean id="digitalSigningScript" parent="baseJavaScriptExtension"
		class="org.alfresco.plugin.digitalSigning.script.SigningServiceScript">
		<property name="extensionName">
			<value>digitalSigning</value>
		</property>
		<property name="digitalSigningService">
			<ref bean="digitalSigningService" />
		</property>
		<property name="authenticationService" ref="authenticationService" />
		<property name="personService" ref="personService" />
		<property name="nodeService" ref="nodeService" />
	</bean>
	
	<!-- Key and image upload WebScript Java backend definition -->
	<bean
		id="webscript.alfresco.digitalSigning.upload.upload.post"
		class="org.alfresco.plugin.digitalSigning.webscript.SignUpload"
		parent="webscript">
		<property name="retryingTransactionHelper">
			<ref bean="retryingTransactionHelper" />
		</property>
		<property name="authenticationService">
			<ref bean="authenticationService" />
		</property>
		<property name="nodeService">
			<ref bean="nodeService" />
		</property>
		<property name="dictionaryService">
			<ref bean="dictionaryService" />
		</property>
		<property name="contentService">
			<ref bean="contentService" />
		</property>
		<property name="fileFolderService">
			<ref bean="fileFolderService" />
		</property>
		<property name="personService">
			<ref bean="personService" />
		</property>
		<property name="metadataEncryptor">
			<ref bean="metadataEncryptor" />
		</property>
	</bean>
	
	<!-- Alias WebScript Java backend definition -->
	<bean
		id="webscript.alfresco.digitalSigning.upload.chooseAlias.post"
		class="org.alfresco.plugin.digitalSigning.webscript.ChooseAlias"
		parent="webscript">
		<property name="retryingTransactionHelper">
			<ref bean="retryingTransactionHelper" />
		</property>
		<property name="authenticationService">
			<ref bean="authenticationService" />
		</property>
		<property name="nodeService">
			<ref bean="nodeService" />
		</property>
		<property name="dictionaryService">
			<ref bean="dictionaryService" />
		</property>
		<property name="contentService">
			<ref bean="contentService" />
		</property>
		<property name="personService">
			<ref bean="personService" />
		</property>
		<property name="metadataEncryptor">
			<ref bean="metadataEncryptor" />
		</property>
	</bean>
	
	<!-- Delete WebScript Java backend definition -->
	<bean
		id="webscript.alfresco.digitalSigning.upload.delete.post"
		class="org.alfresco.plugin.digitalSigning.webscript.Delete"
		parent="webscript">
		<property name="retryingTransactionHelper">
			<ref bean="retryingTransactionHelper" />
		</property>
		<property name="authenticationService">
			<ref bean="authenticationService" />
		</property>
		<property name="nodeService">
			<ref bean="nodeService" />
		</property>
		<property name="dictionaryService">
			<ref bean="dictionaryService" />
		</property>
		<property name="contentService">
			<ref bean="contentService" />
		</property>
		<property name="personService">
			<ref bean="personService" />
		</property>
		<property name="metadataEncryptor">
			<ref bean="metadataEncryptor" />
		</property>
	</bean>
	
	<!-- Key and image information WebScript Java backend definition -->
	<bean
		id="webscript.alfresco.digitalSigning.information.signatureInformation.get"
		class="org.alfresco.plugin.digitalSigning.webscript.SignatureInformation"
		parent="webscript">
		<property name="retryingTransactionHelper">
			<ref bean="retryingTransactionHelper" />
		</property>
		<property name="authenticationService">
			<ref bean="authenticationService" />
		</property>
		<property name="nodeService">
			<ref bean="nodeService" />
		</property>
		<property name="dictionaryService">
			<ref bean="dictionaryService" />
		</property>
		<property name="contentService">
			<ref bean="contentService" />
		</property>
		<property name="personService">
			<ref bean="personService" />
		</property>
	</bean>
	
	<!-- Get image WebScript Java backend definition -->
	<bean
		id="webscript.alfresco.digitalSigning.information.image.get"
		class="org.alfresco.plugin.digitalSigning.webscript.Image"
		parent="webscript">
		<property name="retryingTransactionHelper">
			<ref bean="retryingTransactionHelper" />
		</property>
		<property name="authenticationService">
			<ref bean="authenticationService" />
		</property>
		<property name="nodeService">
			<ref bean="nodeService" />
		</property>
		<property name="contentService">
			<ref bean="contentService" />
		</property>
		<property name="personService">
			<ref bean="personService" />
		</property>
	</bean>
	
	<!-- Verify if nodeRef is transformable in PDF WebScript Java backend definition -->
	<bean
		id="webscript.alfresco.digitalSigning.information.isPdfTransformable.get"
		class="org.alfresco.plugin.digitalSigning.webscript.IsPdfTransformable"
		parent="webscript">
		<property name="contentTransformerRegistry">
			<ref bean="contentTransformerRegistry" />
		</property>
		<property name="retryingTransactionHelper">
			<ref bean="retryingTransactionHelper" />
		</property>
		<property name="nodeService">
			<ref bean="nodeService" />
		</property>
		<property name="contentService">
			<ref bean="contentService" />
		</property>
		<property name="dictionaryService">
			<ref bean="dictionaryService" />
		</property>
	</bean>
	
</beans>
